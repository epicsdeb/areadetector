<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>firewireDCAM: User Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>User Manual </h1>  </div>
</div>
<div class="contents">
<p>The firewireDCAM module is a plug-in to the areaDetector framework. It is recommended to get familiar with the framework when starting to use this plug-in. Excellent documentation can be found on the <a href="http://cars9.uchicago.edu/software/epics/areaDetector.html">areaDetector documentation</a> page.</p>
<p>AreaDetector provides a number of ready-made templates, MEDM screens and plug-ins that can be used for general control and data readout. These are all fairly generic to 2D detectors.</p>
<p>Note as this is a plug-in module to a larger framework, it is not considered an end-user application. A number of things will need to be done to enable an end-user to operate cameras: </p>
<ul>
<li>An IOC binary need to be build with a startup script and possibly substitutions files to instantiate all the necessary or desired templates. </li>
<li>Custom templates or databases may need to be developed to suit specific controls requirement in your application. </li>
<li>End user client display of the images is not included in this package. The data can be streamed to disk using the <a href="http://cars9.uchicago.edu/software/epics/NDPluginFile.html">NDPluginFile plug-in</a> or grabbed by any Channel Access client through the PVs available in the <a href="http://cars9.uchicago.edu/software/epics/NDPluginStdArrays.html">NDPluginStdArrays</a></li>
</ul>
<p>The following sections describes the templates and configuration functions this plug-in module provides and how to use them.</p>
<h2><a class="anchor" id="db_template"></a>
Database Template</h2>
<p>One database template is supplied to enable control and read back of all camera features. See <a class="el" href="firewireDCAM_8template.html">firewireDCAM.template</a> for details regarding macros and what features and records are available.</p>
<h2><a class="anchor" id="startup_script"></a>
Startup Script</h2>
<p>A couple of startup scripts are supplied in the example/iocBoot/iocexample/ directory. These startup scripts have a number of macros that will need to be substituted before running them. The EPICS build system at DLS will automate this and place the substituted startup files in example/bin/linux-x86/stexample.boot but other sites may possibly not have the same build system rules...</p>
<h3><a class="anchor" id="config_functions"></a>
Configuration Functions</h3>
<p>A number of areaDetector plug-ins are used in the example startup scripts. Please see the relevant documentation from areaDetector and modify according to your needs. The plug-ins configuration function documentation can be found on the areaDetector website: <a href="http://cars9.uchicago.edu/software/epics/NDPluginStdArrays.html#Configuration">NDPluginStdArrays</a> and <a href="http://cars9.uchicago.edu/software/epics/NDPluginROI.html#Configuration">NDPluginROI</a></p>
<p>In order to initialise the firewire bus and each individual camera, two configuration functions need to be called during startup to initialise the module: </p>
<ul>
<li><a class="el" href="drvFirewireDCAM_8h.html#a6d50200dff8184c53c436103fd99bbdd">FDC_InitBus()</a>: This need to be called only once to initialise the bus before FDC_Config can be called. This function does not need any arguments. </li>
<li><a class="el" href="drvFirewireDCAM_8h.html#a454ac2cac58a9bcff7b247de1d2ac293">FDC_Config()</a>: <p>Configuration function to configure one camera. </p>
<p>This function need to be called once for each camera to be used by the IOC. A call to this function instanciates one object from the <a class="el" href="classFirewireDCAM.html">FirewireDCAM</a> class. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>portName</em>&nbsp;</td><td>Asyn port name to assign to the camera. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>camid</em>&nbsp;</td><td>The camera ID or serial number in a hexadecimal string. Lower case and upper case letters can be used. This is used to identify a specific camera on the bus. For instance: "0x00b09d01007139d0". </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>speed</em>&nbsp;</td><td>The bus speed to be used. This indicates whether to use the bus in 1394A or 1394B mode. Valid values are: 400 or 800. If an invalid value is entered the function will always default to 400 (legacy mode). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxBuffers</em>&nbsp;</td><td>Maxiumum number of NDArray objects (image buffers) this driver is allowed to allocate. This driver requires 2 buffers, and each queue element in a plugin can require one buffer which will all need to be added up in this parameter. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxMemory</em>&nbsp;</td><td>Maximum memory (in bytes) that this driver is allowed to allocate. So if max. size = 1024x768 (8bpp) and maxBuffers is, say 14. maxMemory = 1024x768x14 = 11010048 bytes (~11MB) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>disableScalable</em>&nbsp;</td><td>Disable scalable modes if this is 1 </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>
<h2><a class="anchor" id="example"></a>
Example</h2>
<p>The module is supplied with an example that will build an IOC binary. Startup scripts are also provided but obviusly need to be modified to the specific cameras to be used.</p>
<h3><a class="anchor" id="screenshots"></a>
Screenshots</h3>
<p>The example running one Point Grey Flea2 camera with 1024x768 resolution @30fps. The data is sent through the areaDetector ROI plugin and 3 ROIs are being used: one that takes the entire image from the camera as the main ROI and two smaller ones. The CPU load on the server (a dual core Dell Poweredge 200) is around 76 percent of one core in this case.</p>
<div align="center">
<img src="Screenshot-1.png" alt="Screenshot-1.png"/>
<p><strong>This is a caption</strong></p></div>
 </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Feb 25 2011 13:34:31 for firewireDCAM by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
